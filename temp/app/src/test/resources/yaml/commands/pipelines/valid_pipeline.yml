pipeline:
  name: TestPipeline
  stages:
    - build
    - test
    - deploy

jobs:
  - name: BuildJob
    stage: build
    image: maven:3.8.3-openjdk-17
    script:
      - mvn clean compile

  - name: TestJob
    stage: test
    image: maven:3.8.3-openjdk-17
    needs:
      - BuildJob
    script:
      - mvn test

  - name: DeployJob
    stage: deploy
    image: alpine:latest
    needs:
      - TestJob
    script:
      - echo "Deploying application..."